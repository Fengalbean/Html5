{"version":3,"sources":["xhrObserver.js"],"names":["window","CustomEvent","event","params","bubbles","cancelable","detail","undefined","evt","document","createEvent","initCustomEvent","prototype","Event","ajaxEventTrigger","ajaxEvent","console","log","dispatchEvent","OldXHR","XMLHttpRequest","newXHR","realXHR","addEventListener","call","e"],"mappings":"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","sourcesContent":["/**\r\n * Created by dbfeng on 2018/1/18.\r\n */\r\n\r\n/**\r\n * 不支持CustomEvent的polyfill\r\n */\r\n;(function () {\r\n    if (typeof window.CustomEvent === 'function') return false;\r\n\r\n    function CustomEvent(event, params) {\r\n        params = params || {bubbles: false, cancelable: false, detail: undefined};\r\n        var evt = document.createEvent('CustomEvent');\r\n        evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\r\n        return evt;\r\n    }\r\n\r\n    CustomEvent.prototype = window.Event.prototype;\r\n\r\n    window.CustomEvent = CustomEvent;\r\n})();\r\n\r\n;(function () {\r\n\r\n    function ajaxEventTrigger(event) {\r\n        var ajaxEvent = new CustomEvent(event, {detail: this });\r\n        console.log(this)\r\n        window.dispatchEvent(ajaxEvent);\r\n    }\r\n\r\n    var OldXHR = window.XMLHttpRequest;\r\n\r\n    function newXHR() {\r\n        var realXHR = new OldXHR();\r\n\r\n        realXHR.addEventListener('error', function () {\r\n            ajaxEventTrigger.call(this, 'ajaxError');\r\n        }, false);\r\n\r\n        realXHR.addEventListener('timeout', function () {\r\n            ajaxEventTrigger.call(this, 'ajaxTimeout');\r\n        }, false);\r\n\r\n\r\n        realXHR.addEventListener('abort', function () {\r\n            ajaxEventTrigger.call(this, 'ajaxAbort');\r\n        }, false);\r\n\r\n\r\n        realXHR.addEventListener('load', function () {\r\n            ajaxEventTrigger.call(this, 'ajaxLoad');\r\n        }, false);\r\n\r\n        realXHR.addEventListener('loadstart', function () {\r\n            ajaxEventTrigger.call(this, 'ajaxLoadStart');\r\n        }, false);\r\n\r\n        realXHR.addEventListener('progress', function () {\r\n            ajaxEventTrigger.call(this, 'ajaxProgress');\r\n        }, false);\r\n\r\n        realXHR.addEventListener('loadend', function (e) {\r\n            ajaxEventTrigger.call(this, 'ajaxLoadEnd');\r\n        }, false);\r\n        realXHR.addEventListener('readystatechange', function () {\r\n            ajaxEventTrigger.call(this, 'ajaxReadyStateChange');\r\n        }, false);\r\n\r\n        return realXHR;\r\n    }\r\n\r\n    window.XMLHttpRequest = newXHR;\r\n})();"],"file":"xhrObserver.js"}